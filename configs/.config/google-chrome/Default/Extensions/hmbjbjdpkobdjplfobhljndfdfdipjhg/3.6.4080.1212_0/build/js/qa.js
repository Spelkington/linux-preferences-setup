"use strict";var qa=function(){function s(e){var a=util.formatTime(new Date(1e3*parseInt(e.timeT))),n="You";e.senderIsMe||(n=e.isAnonymous?"Anonymous Viewer":e.senderName);var t='<div class="title"><span class="user">'+mainAppHtmlWindow.util.htmlEncode(n)+'</span><span class="text"> asked:</span><span class="time">'+a+"</span></div>",s='<div class="msg">'+mainAppHtmlWindow.util.htmlEncode(e.questionText).replace(/[\r\n]/g,"<br>")+"</div>",i='<div class="question">'+t+anchorme.js(s,{attributes:{target:"_blank"}})+"</div>",o='<div class="qa" data-name="'+e.questionID+'">'+i+"</div>";return $(".qa-content").append(o),$(".qa-content").html()}function i(e){var a=util.formatTime(new Date(1e3*parseInt(e.timeT))),n=mainAppHtmlWindow.util.htmlEncode(e.senderName),t="";if(e.isLiveAnswer){t='<div class="answer answer-live">'+('<div class="notice">'+(i='<div class="live-text"><span class="text">'+n+' has answered this question live.</span> <span class="time">'+a+"</span></div>")+"</div>")+"</div>"}else{var s='<div class="title"><span class="user">'+n+'</span> <span class="text"> answered'+(e.isPrivate?" (privately)":"")+':</span><span class="time">'+a+"</span></div>",i='<div class="msg">'+mainAppHtmlWindow.util.htmlEncode(e.answerText).replace(/[\r\n]/g,"<br>")+"</div>";t='<div class="answer answer-text">'+s+anchorme.js(i,{attributes:{target:"_blank"}})+"</div>"}return o(e,0),$('.qa-content .qa[data-name="'+e.questionID+'"]').append(t),$(".qa-content").html()}function o(e,a){if(a){var n='<div class="live-answer-notice">'+mainAppHtmlWindow.util.htmlEncode(e.liveAnswering0.liveAnsweringName)+" would like to answer this question live.</div>";$('.qa[data-name="'+e.questionID+'"]').append(n)}else $('.qa[data-name="'+e.questionID+'"] .live-answer-notice').remove();return $(".qa-content").html()}function e(e){e?($(".webinar-viewer-bar span.qa-number-viewer").text(mainAppHtmlWindow.qaObject.qaNum),$(".webinar-viewer-bar li.qa").addClass("remind"),$(".webinar-viewer-bar i.img-viewerqa").removeClass("forceHide"),$(".webinar-viewer-bar span.qa-number-viewer").removeClass("forceHide")):(mainAppHtmlWindow.qaObject.qaNum=0,$(".webinar-viewer-bar li.qa").removeClass("remind"),$(".webinar-viewer-bar i.img-viewerqa").addClass("forceHide"),$(".webinar-viewer-bar span.qa-number-viewer").addClass("forceHide"),$(".webinar-viewer-bar span.qa-number-viewer").text(0))}function d(){0<mainAppHtmlWindow.qaObject.openNum?t(1):t(0)}function l(e){var a=util.formatTime(new Date(1e3*parseInt(e.timeT))),n=mainAppHtmlWindow.common.formatNameByLength(e.senderName,30);e.isAnonymous&&(n="Anonymous Viewer");var t='<div class="title"><span class="user">'+mainAppHtmlWindow.util.htmlEncode(n)+'</span><span class="text"> asked:</span><span class="time">'+a+"</span></div>",s='<div class="msg">'+mainAppHtmlWindow.util.htmlEncode(e.questionText).replace(/[\r\n]/g,"<br>")+"</div>",i='<div class="question">'+t+anchorme.js(s,{attributes:{target:"_blank"}})+"</div>",o='<div class="qa" data-name="'+e.questionID+'">'+i+c("forQuestion")+"</div>";return $(".qa-questions").append(o),$(".qa-questions").html()}function r(e){var a=util.formatTime(new Date(1e3*parseInt(e.timeT))),n="",t=" has";e.senderIsMe?(n="You",t=" have"):n=mainAppHtmlWindow.util.htmlEncode(mainAppHtmlWindow.common.formatNameByLength(e.senderName,30));var s="";if(e.isLiveAnswer){s='<div class="answer answer-live">'+('<div class="notice">'+(o='<div class="live-text"><span class="text">'+n+t+' answered this question live.</span> <span class="time">'+a+"</span></div>")+"</div>")+"</div>"+c("forAnswer")}else{var i='<div class="title"><span class="user">'+n+'</span> <span class="text"> answered'+(e.isPrivate?" (privately)":"")+':</span><span class="time">'+a+"</span></div>",o='<div class="msg">'+mainAppHtmlWindow.util.htmlEncode(e.answerText).replace(/[\r\n]/g,"<br>")+"</div>";s='<div class="answer"><div class="answer-text">'+i+anchorme.js(o,{attributes:{target:"_blank"}})+"</div></div>"+c("forAnswer")}if(q(e,0),0==$('.qa-answers .qa[data-name="'+e.questionID+'"]').length){var d=$('.qa-questions .qa[data-name="'+e.questionID+'"]');$(".qa-answers").append(d.prop("outerHTML"))}var l=!0;0<$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form .input').length&&!$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form .input').hasClass("forceHide")&&(l=!1);var r="",m=!1;return l||e.senderIsMe||(r=$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form textarea').val(),$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form label').find("input[type=checkbox]").is(":checked")&&(m=!0)),$('.qa-questions .qa[data-name="'+e.questionID+'"]').remove(),$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form').remove(),$('.qa-answers .qa[data-name="'+e.questionID+'"]').append(s),l||e.senderIsMe||($('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form textarea').val(r),$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form').find(".form1").addClass("forceHide"),$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form').find(".form2").removeClass("forceHide"),0<util.trim(r).length&&$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form .sendbtn').addClass("enabled"),$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form label').find("input[type=checkbox]").prop("checked",m)),$(".qa-answers").html()}function c(e){var a='<div class="input form2 forceHide">\t<textarea></textarea></div>',n='<label class="form2 forceHide"><input   type="checkbox"  /><span class="label-text"> Send privately</span></label>',t="";"forQuestion"==e?t='<div class="qa-form qa-form-question">'+a+('<div class="send">'+n+'<div class="btn-div"><span class="cancelbtn button enabled form2 forceHide" data-name="cancel">Cancel</span><span class="sendbtn button form2 forceHide" data-name="send">Send</span><span class="bylive button enabled form1" data-name="bylive">Answer Live</span><span class="bytext button enabled form1" data-name="bytext">Answer by Text</span></div>'+"</div>")+"</div>":t='<div class="qa-form qa-form-answer">'+a+('<div class="send">'+n+'<div class="btn-div"><span class="cancelbtn button enabled form2 forceHide" data-name="cancel">Cancel</span><span class="sendbtn button form2 forceHide" data-name="send">Send</span><span class="addbtn button enabled form1" data-name="add">Add an answer</span></div>'+"</div>")+"</div>";return t}function a(){$(".btn-div").undelegate("span","click").delegate("span","click",function(e){var a=$(this).attr("data-name");if("cancel"==a)$(this).closest(".qa-form").find(".form2").addClass("forceHide"),$(this).closest(".qa-form").find(".form1").removeClass("forceHide");else if("send"==a){if($(this).hasClass("enabled")){var n=0,t=$(this).closest(".send").find("input[type=checkbox]"),s=$(this).closest(".qa-form").find("textarea"),i=$(this).closest(".qa").attr("data-name");t.is(":checked")&&(n=1),mainAppHtmlWindow.inmeeting.answerQAQuestion(i,s.val(),n),s.val("")}}else if("bylive"==a){i=$(this).closest(".qa").attr("data-name");mainAppHtmlWindow.inmeeting.startQALiving(i)}else"bytext"!=a&&"add"!=a||($(this).closest(".qa-form").find(".form1").addClass("forceHide"),$(this).closest(".qa-form").find(".form2").removeClass("forceHide"))}),$(".window-qa-plist .qa-form textarea").bind("input propertychange",function(){0<util.trim(this.value).length?$(this).closest(".qa-form").find(".sendbtn").addClass("enabled"):$(this).closest(".qa-form").find(".sendbtn").removeClass("enabled")}),$(".donebtn").off("click").click(function(){var e=$(this).closest(".qa").attr("data-name");mainAppHtmlWindow.inmeeting.endQALiving(e)})}function q(e,a){if(a){var n=e.liveAnswering0.liveAnsweringName,t='<span class="donebtn">Done</span>';e.liveAnswering0.liveAnsweringIsMe?n="You":t="";var s='<div class="live-answer-notice">'+n+" would like to answer this question live."+t+"</div>";$('.qa[data-name="'+e.questionID+'"]').append(s)}else $('.qa[data-name="'+e.questionID+'"] .live-answer-notice').remove();return $('.qa-questions .qa[data-name="'+e.questionID+'"] .qa-form').remove(),$(".qa-questions").html()}function n(){$(".qa-tab .question-count").text(mainAppHtmlWindow.qaObject.openNum),$(".qa-tab .answer-count").text(mainAppHtmlWindow.qaObject.answeredNum)}function t(e){var a=mainAppHtmlWindow.qaObject.openNum;e?($(".qa-number").text(a),$(".qa-number").removeClass("forceHide"),mainAppHtmlWindow.client.autoShow(1,1),mainAppHtmlWindow.toolbar.mouseMoveBind(!1,!1),mainAppHtmlWindow.toolbar.mouseEnterLeaveBind(!1)):($(".qa-number").addClass("forceHide"),$(".qa-number").text(0),mainAppHtmlWindow.toolbar.mouseMoveBind(),mainAppHtmlWindow.toolbar.mouseEnterLeaveBind())}function m(){0<mainAppHtmlWindow.qaObject.openNum?$(".qa-questions .empty-notice").remove():($(".qa-questions .empty-notice").remove(),$(".qa-questions").append('<div class="empty-notice">You have no open questions</div>')),0<mainAppHtmlWindow.qaObject.answeredNum?$(".qa-answers .empty-notice").remove():($(".qa-answers .empty-notice").remove(),$(".qa-answers").append('<div class="empty-notice">You have no answered questions</div>'))}return{initQAWin:function(){$(".window-qa-plist").addClass("hideMe"),$(".window-qa").addClass("hideMe"),mainAppHtmlWindow.g.getMeetingStatusObj().meetingIsViewOnly?($(".window-qa").removeClass("hideMe"),$(".window-qa .qa-form textarea").bind("input propertychange",function(){0<util.trim(this.value).length?$(".window-qa .send .button").addClass("enabled"):$(".window-qa .send .button").removeClass("enabled")}),$(".window-qa .send .button").off("click").click(function(){var e=0;$("#sendOption").is(":checked")&&(e=1),mainAppHtmlWindow.inmeeting.askQAQuestion($(".window-qa .qa-form textarea").val(),e),$(".window-qa .qa-form textarea").val(""),$(".window-qa .send .button").removeClass("enabled")}),$("#sendOption").off("click").click(function(){mainAppHtmlWindow.qaObject.anonymously=$("#sendOption").is(":checked")}),$("#sendOption").attr("checked",mainAppHtmlWindow.qaObject.anonymously),$(".window-qa .qa-content").html(mainAppHtmlWindow.qaObject.qaContent)):($(".window-qa-plist").removeClass("hideMe"),$(".window-qa-plist .qa-tab").undelegate("li","click").delegate("li","click",function(e){var a=$(this).attr("data-name");$(".window-qa-plist .qa-tab li").removeClass("selected"),$(".window-qa-plist .qa-questions").addClass("hideMe"),$(".window-qa-plist .qa-answers").addClass("hideMe"),"question"==a?($(this).addClass("selected"),$(".window-qa-plist .qa-questions").removeClass("hideMe")):"answer"==a&&($(this).addClass("selected"),$(".window-qa-plist .qa-answers").removeClass("hideMe"))}),$(".window-qa-plist .qa-questions").html(mainAppHtmlWindow.qaObject.qaQuestions),$(".window-qa-plist .qa-answers").html(mainAppHtmlWindow.qaObject.qaAnswers),a(),n(),m()),a11y()},refreshQAContent:function(e,a){var n=mainAppHtmlWindow.winMgr.getWinByWinId("qaWin");if(mainAppHtmlWindow.g.getMeetingStatusObj().meetingIsViewOnly){var t="";"question"==a&&(t=s(e),null!==n&&n.contentWindow.qa.addQAQuestion(e)),"answer"==a&&(t=i(e),null!==n&&n.contentWindow.qa.addQAAnswer(e)),"live"==a&&e.questionSenderIsMe&&(t=o(e,1),null!==n&&n.contentWindow.qa.showLiveReply(e,1)),mainAppHtmlWindow.qaObject.qaContent=t}else t="","question"==a&&(t=l(e),null!==n&&n.contentWindow.qa.addQAQuestion4Plist(e),mainAppHtmlWindow.qaObject.openNum=$(".qa-questions .qa").length,mainAppHtmlWindow.qaObject.qaQuestions=$(".qa-questions").html()),"answer"==a&&(t=r(e),null!==n&&n.contentWindow.qa.addQAAnswer4Plist(e),mainAppHtmlWindow.qaObject.openNum=$(".qa-questions .qa").length,mainAppHtmlWindow.qaObject.answeredNum=$(".qa-answers .qa").length,mainAppHtmlWindow.qaObject.qaAnswers=$(".qa-answers").html(),mainAppHtmlWindow.qaObject.qaQuestions=$(".qa-questions").html()),"live"==a&&(t=q(e,1),null!==n&&n.contentWindow.qa.showLiveReply4Plist(e,1),mainAppHtmlWindow.qaObject.qaQuestions=$(".qa-questions").html()),d(),null!==n&&(n.contentWindow.qa.bindEvent4PlistForm(),n.contentWindow.qa.refreshQANum4Plist(),n.contentWindow.qa.showEmptyQANotice())},addQAQuestion:s,addQAAnswer:i,showLiveReply:o,refreshQARemind:function(){null===mainAppHtmlWindow.winMgr.getWinByWinId("qaWin")?(mainAppHtmlWindow.qaObject.qaNum=mainAppHtmlWindow.qaObject.qaNum+1,e(1)):mainAppHtmlWindow.qaObject.qaNum=0},showQARemind4Viewer:e,addQAQuestion4Plist:l,bindEvent4PlistForm:a,addQAAnswer4Plist:r,showLiveReply4Plist:q,refreshQANum4Plist:n,refreshQARemind4Plist:d,showQARemind4Plist:t,showEmptyQANotice:m}}();